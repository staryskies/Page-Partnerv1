<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading App</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <script>
    if (
      !localStorage.getItem('username') &&
      window.location.pathname !== '/homepage.html' &&
      window.location.pathname !== '/login.html' &&
      window.location.pathname !== '/signup.html'
    ) {
      window.location.href = '/homepage.html';
    }
  </script>
  <div class="container">
    <h1>Reading App</h1>
    <div class="user-info">
      <span>Logged in as: <span id="username"></span></span>
      <button onclick="logout()">Logout</button>
    </div>

    <h2>Add a New Book</h2>
    <input type="text" id="book-title" placeholder="Book Title">
    <input type="text" id="book-genre" placeholder="Genre">
    <button onclick="addBook()">Add Book</button>

    <h2>Books</h2>
    <select id="book-select" onchange="loadGroups()">
      <option value="">Select a book</option>
    </select>

    <h2>Groups</h2>
    <select id="group-select" onchange="loadComments()">
      <option value="">Select a group</option>
    </select>
    <div>
      <input type="text" id="new-group" placeholder="New Group Name">
      <button onclick="addGroup()">Add Group</button>
    </div>

    <h2>Book Details</h2>
    <div id="book-details">Select a book to view details</div>

    <h2>Group Comments</h2>
    <div id="comments" class="comments">Select a book and group to view comments</div>

    <h3>Add a Comment</h3>
    <input type="text" id="new-comment" placeholder="Add a comment">
    <button onclick="postComment()">Post</button>

    <div id="error" class="error"></div>
  </div>
  <script src="/script.js"></script>
</body>
</html>